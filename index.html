<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Hello World!</title>
  <link rel="stylesheet" type="text/css" href="css/app.css">
</head>
<body>
  <div class="well">

    <div class="row">
      <div class="col-xs-12">
        <input id="file" type="file"> <button id="load">Load Video</button>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12">
        <video id="video">
          <source src="videos/ciudad.mp4"></source>
        </video>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12">
        <button id="play">PLAY</button>
        <button id="frame">Get Frame</button>
        <button id="smpte">Get SMPTE</button>
        <button id="fw">>></button>
        <button id="bw"><<</button>
        <button id="shoot">:O</button>
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12">
        <ul id="videoFrameScreenshots">
          
        </ul>
      </div>
    </div>
    
  </div>

  <script src="js/video.frame.lib.js"></script>
  <script type="text/javascript">

    var videoFrame = VideoFrame({
      id: 'videoPlayer',
      frameRate: FrameRates.film,
      callback: function(response) {
        console.log(response);
      }
    });

    var isPlaying = false;

    document.getElementById('play').addEventListener('click', function(){
      if (isPlaying) {
        videoFrame.video.pause();
      } 
      else {
        videoFrame.video.play();
      }

      isPlaying = !isPlaying;
    });

    document.getElementById('frame').addEventListener('click', function(){
      alert(videoFrame.get());
    });

    document.getElementById('shoot').addEventListener('click', function(b){
      var c = videoFrame.toSMPTE();
      var a = document.createElement("canvas");

      a.width = videoFrame.video.videoWidth;
      a.height = videoFrame.video.videoHeight;
      a.getContext("2d").drawImage(videoFrame.video, 0, 0);
      a = a.toDataURL("image/jpeg");
      if ("dataURI" === b) return a;

      document.getElementById('videoFrameScreenshots').innerHTML += '<li><a class="thumbnail"><img src="' + a + '" alt="' + c + '" /><p>' + c + "</p></a></li>";
    });

    document.getElementById('smpte').addEventListener('click', function(){
      alert(videoFrame.toSMPTE());
    });

    document.getElementById('bw').addEventListener('click', function(){
      videoFrame.seekBackward(1, function(a, b){
        console.log(a, b);
      });
    });

    document.getElementById('fw').addEventListener('click', function(){
      videoFrame.seekForward(1, function(a, b){
        console.log(a, b);
      });
    });

  </script>
</body>
</html>
